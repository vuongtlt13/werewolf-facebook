{"version":3,"sources":["../event.js"],"names":["chat","Promise","resolve","reject","console","log","conversation","conv","askNamePlayer","askName","askToConfirm","name","question","text","quickReplies","answer","payload","convo","callbacks","event","callback","message","quick_reply","options","typing","ask"],"mappings":"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","file":"event.js","sourcesContent":["function askToConfirm(conv, resolve, name) {\n    const question = {\n        text: 'Your nick name is \"' + name + '\", right?',\n        quickReplies: ['YES', 'NO'],\n    };\n\n    const answer = (payload, convo) => {\n        console.log(\"Ask again!\");\n        askToConfirm(conv, resolve, name);\n    };\n\n    const callbacks = [\n        {\n            event: 'attachment',\n            callback: (payload) => {\n                console.log(\"Ask again!\");\n                askToConfirm(conv, resolve, name);\n            }\n        },\n        {\n            event: 'postback',\n            callback: (payload) => {\n                console.log(\"Ask again!\");\n                askToConfirm(conv, resolve, name);\n            }\n        },\n        {\n            event: 'quick_reply',\n            callback: (payload, convo) => {\n                // console.log(payload);\n                switch (payload.message.quick_reply.payload) {\n                    case 'BOOTBOT_QR_YES':\n                        // convo.say(\"You say yes!\");\n                        resolve(name);\n                        break;\n                    case 'BOOTBOT_QR_NO':\n                        // convo.say(\"You say no!\");\n                        askNamePlayer(conv, resolve);\n                        break;\n                }\n\n            }\n        },\n    ];\n\n    const options = {\n        typing: true // Send a typing indicator before asking the question\n    };\n\n    conv.ask(question, answer, callbacks, options);\n}\n\nfunction askNamePlayer(conv, resolve) {\n    const question = \"What's your nickname?\";\n\n    const answer = (payload, convo) => {\n        // console.log(payload);\n        console.log(\"Name of player is \", payload.message.text);\n        askToConfirm(conv, resolve, payload.message.text);\n    };\n\n    const callbacks = [\n        {\n            event: 'attachment',\n            callback: (payload) => {\n                console.log(\"Ask again!\");\n                askNamePlayer(conv, resolve);\n            }\n        },\n        {\n            event: 'postback',\n            callback: (payload) => {\n                console.log(\"Ask again!\");\n                askNamePlayer(conv, resolve);\n            }\n        },\n        {\n            event: 'quick_reply',\n            callback: (payload) => {\n                console.log(\"Ask again!\");\n                askNamePlayer(conv, resolve);\n            }\n        },\n    ];\n\n    const options = {\n        typing: true // Send a typing indicator before asking the question\n    };\n\n    conv.ask(question, answer, callbacks, options);\n}\n\nexport async function askName(chat) {\n    return new Promise(async (resolve, reject) => {\n        console.log('Ask name of the new player!');\n        chat.conversation((conv) => {\n            askNamePlayer(conv, resolve);\n        });\n    });\n}"]}